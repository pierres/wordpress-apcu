language: php

matrix:
  include:
    - php: 7.1
      env: APCU_VERSION=5.1.7
    - php: 7.0
      env: APCU_VERSION=5.1.7
    - php: 5.6
      env: APCU_VERSION=4.0.11
    - php: 5.5
      env: APCU_VERSION=4.0.11

install:
  - composer install

before_script:
  - ls -l $(php -r 'echo ini_get("extension_dir");')
  - rm -vf $(php -r 'echo ini_get("extension_dir");')/apcu.so
  - printf "yes\nno\n" | pecl install apcu-${APCU_VERSION}
  - printf "apc.enable_cli=1" > apcu-cli.ini
  - phpenv config-add apcu.ini

script:
  - vendor/bin/phpunit
